(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{447:function(n,e,s){"use strict";s.r(e);var a=s(44),t=Object(a.a)({},(function(){var n=this,e=n.$createElement,s=n._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"webpacké«˜çº§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpacké«˜çº§"}},[n._v("#")]),n._v(" webpacké«˜çº§")]),n._v(" "),s("h2",{attrs:{id:"treeshaking"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#treeshaking"}},[n._v("#")]),n._v(" TreeShaking")]),n._v(" "),s("ul",[s("li",[n._v("tree shaking åªæ”¯æŒES Moduleçš„æ¨¡å—å¼•å…¥æ–¹å¼ï¼Œta çš„åº•å±‚æ˜¯ä¸€ä¸ªé™æ€å¼•å…¥çš„æ–¹å¼ï¼Œè€Œcommonjsåº•å±‚æ˜¯ä¸€ä¸ªåŠ¨æ€å¼•å…¥çš„æ–¹å¼ï¼Œtree shakingåªæ”¯æŒé™æ€å¼•å…¥çš„æ–¹å¼")]),n._v(" "),s("li",[n._v("ä½¿ç”¨æ–¹å¼ï¼š\n"),s("ul",[s("li",[n._v("åœ¨å¼€å‘ç¯å¢ƒä¸­, ä¸€èˆ¬tree shakingä¸ä¼šç”Ÿæ•ˆï¼Œä¸ä¼šåˆ é™¤æ— ç”¨ä»£ç ï¼Œåªä¼šæç¤ºä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸ºäº†æ–¹ä¾¿sourceMapçº é”™è°ƒè¯•")])]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('optimization:{\n  usedExports: true\n}\nåœ¨package.jsonä¸­æ·»åŠ ï¼š\nsideEffects: false //å¯¹æ‰€æœ‰æ–‡ä»¶éƒ½è¿›è¡Œtree shaking ,æ²¡æœ‰éœ€è¦ç‰¹æ®Šå¤„ç†çš„æ¨¡å—\n// ä¸€èˆ¬ä¼šè®¾ç½® sideEffects: ["*.css", "@babel/polyfill"]\n')])])]),s("ul",[s("li",[n._v("åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œtree shaking æ˜¯ä¼šç”Ÿæ•ˆçš„ï¼Œä¼šå‰”é™¤æ— ç”¨ä»£ç ï¼Œä¸”åªéœ€è¦è®¾ç½®sideEffectsï¼Œå†…ç½®ä¼˜åŒ–ä¸­å·²ç»ä¼˜åŒ– äº†optimization")])])]),n._v(" "),s("li",[n._v("@babel/polyfillå¹¶æ²¡æœ‰å‘ä»£ç ä¸­å¯¼å…¥ä»»ä½•çš„å†…å®¹ï¼Œè€Œæ˜¯åœ¨windowå¯¹è±¡ä¸ŠæŒ‚è½½äº†ä¸€äº›å…¨å±€å˜é‡ï¼Œå¦‚Promiseï¼Œ Window.Promise")])]),n._v(" "),s("h2",{attrs:{id:"develoment-å’Œ-production-æ¨¡å¼çš„åŒºåˆ†æ‰“åŒ…"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#develoment-å’Œ-production-æ¨¡å¼çš„åŒºåˆ†æ‰“åŒ…"}},[n._v("#")]),n._v(" Develoment å’Œ Production æ¨¡å¼çš„åŒºåˆ†æ‰“åŒ…")]),n._v(" "),s("ul",[s("li",[n._v("å¼€å‘ç¯å¢ƒéœ€è¦å¼ºå¤§çš„ source map å’Œä¸€ä¸ªæœ‰ç€ live reloading(å®æ—¶é‡æ–°åŠ è½½) æˆ– hot module replacement(çƒ­æ¨¡å—æ›¿æ¢) èƒ½åŠ›çš„ localhost serverï¼Œçº¿ä¸Šç¯å¢ƒéœ€è¦å¯¹ä»£ç è¿›è¡Œå‹ç¼©ï¼Œå¯¹SourceMapè¿›è¡Œç²¾ç®€, èµ„æºä¼˜åŒ–ç­‰ï¼Œé€šè¿‡è¿™äº›ä¼˜åŒ–æ–¹å¼æ”¹å–„åŠ è½½æ—¶é—´")]),n._v(" "),s("li",[n._v("é€šè¿‡ç¬¬ä¸‰æ–¹æ¨¡å—webpack-mergeå°†å…¬å…±é…ç½®ä¸å½“å‰é…ç½®è¿›è¡Œåˆå¹¶")])]),n._v(" "),s("h2",{attrs:{id:"webpack-å’Œ-code-splitting-ä»£ç åˆ†éš”"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-å’Œ-code-splitting-ä»£ç åˆ†éš”"}},[n._v("#")]),n._v(" Webpack å’Œ Code Splitting(ä»£ç åˆ†éš”)")]),n._v(" "),s("ul",[s("li",[n._v("ä»£ç åˆ†éš”ï¼Œä¸webpackæ— å…³ï¼Œåªæ˜¯ç°åœ¨webpackå®ç°è¿™ä¸ªåŠŸèƒ½å®ç°çš„æ¯”è¾ƒå¥½")]),n._v(" "),s("li",[n._v("webpackä¸­å®ç°ä»£ç åˆ†éš”ï¼Œä¸¤ç§æ–¹å¼ï¼š\n"),s("ul",[s("li",[n._v("åŒæ­¥ä»£ç ï¼Œåªéœ€åœ¨webpack.common.jsä¸­åšoptimizationé…ç½®å³å¯")])]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("optimization: {\n  splitChunks:{\n    chunks: 'all'\n  }\n}\n")])])]),s("ul",[s("li",[n._v("å¼‚æ­¥ä»£ç ï¼šä½¿ç”¨import()è¯­æ³•å¼‚æ­¥åŠ è½½çš„ä»£ç ï¼Œæ— éœ€åšä»»ä½•é…ç½®ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œä»£ç åˆ†éš”")])])]),n._v(" "),s("li",[n._v("SplitChunksPluginé…ç½®å‚æ•°è¯¦è§£\n"),s("ul",[s("li",[n._v("é­”æ³•æ³¨é‡Šï¼š import(/* webpackChunkName: \"lodash\" */ 'lodash')")])]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("function getComponent() {\n")])])])])]),n._v(" "),s("ul",[s("li",[n._v("return import(/* webpackChunkName: \"lodash\" */ 'lodash').then(({ default: _ }) => {")]),n._v(" "),s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[n._v("var element = document.createElement('div');\n")])])])]),n._v(" "),s("li"),n._v(" "),s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[n._v("element.innerHTML = _.join(['Hello', 'webpack'], ' ');\n")])])])]),n._v(" "),s("li"),n._v(" "),s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[n._v("return element;\n")])])])]),n._v(" "),s("li"),n._v(" "),s("li",[n._v("}).catch(error => 'An error occurred while loading the component');\n}")])]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code")])]),s("p",[n._v("optimization: {\nsplitChunks: {\nchunks: 'async', // asyncåªå¯¹å¼‚æ­¥ä»£ç åšåˆ†éš”ï¼Œinitialåªå¯¹åŒæ­¥ä»£ç åšåˆ†éš”ï¼ŒallåŒæ­¥å¼‚æ­¥éƒ½å¯ï¼Œæ­¤å¤–ï¼Œæ‰“åŒ…åŒæ­¥ä»£ç ï¼Œè¿˜ä¼šèµ°cacheGroupsï¼Œå†å…·ä½“é…ç½®\nminSize: 30000, //å¤§äº30kbçš„æ¨¡å—æ‰åšä»£ç åˆ†éš”\nmaxSize: 0, //å½“ä»£ç åˆ†éš”åç”Ÿæˆçš„æ¨¡å—ä½“ç§¯å¤§äºmaxSizeæ—¶ï¼Œä¼šè¿›è¡ŒäºŒæ¬¡åˆ†éš”ï¼Œè¿›è¡Œæ›´ç»†ç²’åº¦çš„åˆ†éš”\nminChunks: 1, //å½“æŸä¸ªæ¨¡å—è¢«ä½¿ç”¨å¤šå°‘æ¬¡åï¼Œæ‰å¯¹å®ƒè¿›è¡Œä»£ç åˆ†éš”\nmaxAsyncRequests: 5,\nmaxInitialRequests: 3,\nautomaticNameDelimiter: '~',\nname: true,\ncacheGroups: {\nvendors: { // vendors-main.js è¯¥åŒæ­¥ä»£ç å±äºvendorsç»„ï¼Œä¸”æ‰“åŒ…çš„å…¥å£æ–‡ä»¶æ˜¯main.js\ntest: /[\\/]node_modules[\\/]/, //åŒæ­¥ä»£ç çš„å­˜æ”¾æ˜¯å¦åœ¨node_modulesä¸­\npriority: -10,\nfilename: 'vendors.js' // å‘½åä»£ç åˆ†éš”åç”Ÿæˆçš„æ¨¡å—åå­—\n},\ndefault: { //åŒæ­¥ä»£ç åˆ†éš”ï¼Œä¸å±äºvendorsç»„æ—¶ï¼Œä¼šèµ°defaultç»„ï¼Œ\nminChunks: 2,\npriority: -20,\nreuseExistingChunk: true,\nfilename: 'common.js' //defaultç»„ä¹Ÿå¯ä»¥é‡å‘½å\n// default-main.js è¯¥åŒæ­¥ä»£ç å±äºdefaultç»„ï¼Œä¸”æ‰“åŒ…çš„å…¥å£æ–‡ä»¶æ˜¯main.js\n}\n}\n}\n}")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("## Lazy Loading æ‡’åŠ è½½ï¼ŒChunkæ˜¯ä»€ä¹ˆï¼Ÿ\n- æ‡’åŠ è½½ï¼Œä½¿ç”¨import()è¯­æ³•æ‡’åŠ è½½æ¨¡å—ï¼Œåœ¨é¡µé¢éœ€è¦å¤§æ—¶å€™ï¼Œå†å»åŠ è½½ï¼Œä¸éœ€è¦çš„æ—¶å€™å°±ä¸åŠ è½½ï¼Œè¿™æ ·å¯ä»¥æé«˜åŠ è½½æ€§èƒ½\n- Chunkï¼Œæ‰“åŒ…å®Œæˆä¹‹åï¼Œdistæ–‡ä»¶å¤¹ä¸‹æœ‰å‡ ä¸ªjsæ–‡ä»¶ï¼Œå°±æ˜¯æœ‰å‡ ä¸ªchunk\n## æ‰“åŒ…åˆ†æï¼ŒPreloading, Prefetching\n-  æ‰“åŒ…åˆ†æ\n- åœ¨æ‰“åŒ…å‘½ä»¤ä¸­åŠ å…¥ --profile --json > stats.jsonï¼Œç”Ÿæˆä¸€ä¸ªå¯¹æ‰“åŒ…è¿‡ç¨‹çš„æè¿°æ–‡ä»¶ stats.json\n- ç”Ÿæˆåˆ†ææ–‡ä»¶ä¹‹åï¼Œå€ŸåŠ©å·¥å…·æ¥åˆ†ææ‰“åŒ…è¿‡ç¨‹çš„åˆ†æ\n- å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ†ææ‰“åŒ…ç”Ÿæˆä»£ç ä¹‹é—´çš„ä¸€äº›ä¾èµ–å…³ç³»ï¼Œå½“æˆ‘ä»¬åšå¤æ‚é¡¹ç›®çš„ä»£ç æ‰“åŒ…æ—¶ï¼Œæœ‰æ—¶ä»£ç åˆ†éš”å‡ºçš„ä»£ç å½¢å¼ä¸æ˜¯å¾ˆç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©ä»£ç åˆ†æå·¥å…·æ¥åˆ†æï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯æœ‰äº›ä»£ç é‡å¤æ‰“åŒ…ï¼Ÿæœ‰äº›ä»£ç æ‰“åŒ…å¯ä»¥ä¼˜åŒ–ï¼Ÿæœ‰äº›ä»£ç æ‰“åŒ…æ¯”è¾ƒè€—æ—¶ï¼Ÿ \n- Preloading, Prefetching\n")])])]),s("p",[n._v("optimization{\nsplitChunks:{\nchunks: 'all' //æˆ‘ä»¬é…ç½®çš„ä»£ç åˆ†éš”ï¼Œæ˜¯å¯¹åŒæ­¥å’Œå¼‚æ­¥ä»£ç éƒ½åˆ†ç¦»\n// webpacké»˜è®¤åªå¯¹å¼‚æ­¥ä»£ç åšåˆ†ç¦»\n}\n}")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v(" - webpacké»˜è®¤åªå¯¹å¼‚æ­¥ä»£ç åšåˆ†éš”ï¼ŒåŸå› ï¼Ÿ\n   -  å› ä¸ºå¯¹åŒæ­¥ä»£ç åšå®Œåˆ†éš”åï¼Œç¬¬ä¸€æ¬¡è®¿é—®æ—¶åŠ è½½ä»£ç ï¼Œç¬¬äºŒæ¬¡åŠ è½½æ—¶ä½¿ç”¨ç¼“å­˜ï¼Œæé«˜è®¿é—®é€Ÿåº¦ï¼Œä½†è¿™æ ·åšåªä¸è¿‡æ˜¯æé«˜æ¥ç¬¬äºŒæ¬¡è®¿é—®é¡µé¢æ—¶çš„åŠ è½½é€Ÿåº¦ï¼Œè€ŒçœŸæ­£å¯¹é¡µé¢æ€§èƒ½åšä¼˜åŒ–ï¼Œwebapckå¸Œæœ›çš„æ˜¯ï¼Œå½“ä½ ç¬¬ä¸€æ¬¡åŠ è½½é¡µé¢æ—¶ï¼Œå®ƒçš„åŠ è½½é€Ÿåº¦å°±æ˜¯æœ€å¿«çš„ï¼Œæ‰€ä»¥å¯¹åŒæ­¥ä»£ç åšåˆ†éš”ï¼Œæ ¹æœ¬è¾¾ä¸åˆ°ä½ çš„éœ€æ±‚\n   - ä»£ç åˆ†æï¼Œ c+shift+p æ‰“å¼€show coverage,åšå±å¹•å½•åˆ¶æ¥åˆ†æ\n   - webpackçœŸæ­£å¸Œæœ›æˆ‘ä»¬ç¼–å†™ä»£ç çš„æ–¹å¼æ˜¯ï¼Œå¸Œæœ›å°†éœ€è¦äº¤äº’çš„ä»£ç ï¼Œæ”¾åˆ°å¼‚æ­¥åŠ è½½çš„æ¨¡å—ä¸­å»å†™ä½¿ç”¨import()ï¼Œå†ç”¨åˆ°ä»£ç æ—¶å†å»åŠ è½½å®ƒï¼Œæé«˜é¡µé¢é¦–æ¬¡åŠ è½½æ—¶çš„ä»£ç åˆ©ç”¨ç‡ï¼Œæ‰æ˜¯æå‡é¡µé¢é¦–æ¬¡åŠ è½½æ€§èƒ½çš„å…³é”®ï¼Œè€Œéä½¿ç”¨ç¼“å­˜ï¼Œç¼“å­˜åªèƒ½æé«˜é¡µé¢ç¬¬äºŒæ¬¡æ‰“å¼€æ—¶çš„åŠ è½½æ€§èƒ½\n   - æ‰€ä»¥webpackå¸Œæœ›æˆ‘ä»¬ç¼–å†™ä»£ç æ—¶ï¼Œå°½å¯èƒ½çš„å¤šå†™å¼‚æ­¥åŠ è½½çš„ä»£ç ï¼Œæé«˜é¡µé¢é¦–æ¬¡åŠ è½½æ—¶çš„ä»£ç åˆ©ç”¨ç‡ï¼Œè€ŒåŒæ­¥ä»£ç å¯¹æå‡é¡µé¢é¦–æ¬¡åŠ è½½çš„æ€§èƒ½æ„ä¹‰å¹¶ä¸å¤§ï¼Œåªå¯¹ç¼“å­˜æœ‰ç›Šå¤„,å¯¹æ€§èƒ½æå‡éå¸¸æœ‰é™\n - é¡¹ç›®ä¸­çœŸæ­£å¯ä»¥åº”ç”¨å¼‚æ­¥ä»£ç çš„å…¸å‹åœºæ™¯ï¼š\n   -  åœ¨ç‚¹å‡»ç™»å½•æ—¶ï¼Œä¼šæ˜¾ç¤ºä¸€ä¸ªç™»å½•æ¡†ï¼Œåœ¨åŠ è½½é¦–é¡µæ—¶ï¼Œç™»å½•æ¡†çš„ä»£ç å°±ä¸åº”è¯¥è¢«åŠ è½½ï¼Œåœ¨ç‚¹å‡»æ—¶åœ¨åŠ è½½æ¯”è¾ƒå¥½ï¼Œä½†è¿™æ ·åˆä¼šé€ æˆç‚¹å‡»æ—¶çš„ç”¨æˆ·äº¤äº’å¾ˆæ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è®¿é—®é¦–é¡µæ—¶ï¼ŒåªåŠ è½½é¦–é¡µå†…å®¹ï¼Œä¸åŠ è½½ç™»å½•æ¡†çš„ä»£ç é€»è¾‘ï¼Œç­‰åˆ°é¦–é¡µåŠ è½½å®Œæˆï¼Œå¸¦å®½é‡Šæ”¾å‡ºæ¥ï¼Œç½‘ç»œç©ºé—²æ—¶ï¼Œå†å»å·å·å°†ç™»å½•æ¡†çš„ä»£ç é€»è¾‘ä¸‹è½½ä¸‹æ¥ï¼Œè¿™æ ·ç‚¹å‡»æ—¶å°±ä¸ä¼šå­˜åœ¨äº¤äº’æ…¢çš„é—®é¢˜äº†ï¼Œè¿™æ ·åšæ—¢è§£å†³äº†é¦–é¡µæ ¸å¿ƒä»£ç åŠ è½½éå¸¸å¿«çš„ä¸€ä¸ªè¦æ±‚ï¼Œåˆè§£å†³äº†ç‚¹å‡»ç™»å½•æ¡†å±•ç¤ºéå¸¸å¿«çš„ä¸€ä¸ªè¦æ±‚ \n   - Prefetchingä¼šç­‰åˆ°é¡µé¢æ ¸å¿ƒä»£ç åŠ è½½å®Œæˆï¼Œç½‘ç»œç©ºé—²æ—¶åŠ è½½\n   - import(/* webpackPrefetch: true */ 'LoginModal');\n   - Preloadingä¼šå’Œé¡µé¢æ ¸å¿ƒä»£ç ä¸€èµ·å¹¶è¡ŒåŠ è½½ \n   - import(/* webpackPreload: true */ 'ChartingLibrary');\n   - æ‰€ä»¥ä»£ç çš„æœ€ä¼˜ç¼–ç¨‹åº”è¯¥æ˜¯ä½¿ç”¨Prefetchï¼Œç­‰åˆ°é¡µé¢æ ¸å¿ƒä»£ç åŠ è½½å®Œæˆä¹‹åï¼Œç½‘ç»œç©ºé—²æ—¶ï¼Œå†å»åŠ è½½è¿™äº›éœ€è¦æ‡’åŠ è½½çš„jsæ–‡ä»¶ï¼Œè¿™æ ·æ‰æ˜¯webpackæ¨èçš„æœ€ä¼˜çš„ç¼–ç æ–¹å¼ï¼Œ\n   - è¦æƒ³æé«˜é¡µé¢æ€§èƒ½ï¼Œä¸åº”è¯¥å»å…³æ³¨ç¼“å­˜ï¼Œå› ä¸ºç¼“å­˜èƒ½å¸¦æ¥çš„æ€§èƒ½æå‡å®åœ¨æœ‰é™ï¼Œè€Œåº”è¯¥å»é‡ç‚¹å…³æ³¨é¡µé¢åŠ è½½çš„jsæ–‡ä»¶çš„ä»£ç åˆ©ç”¨ç‡ï¼Œæœ‰ä¸€äº›äº¤äº’ä¹‹åæ‰èƒ½åˆ©ç”¨åˆ°çš„ä»£ç ï¼Œå®Œå…¨å¯ä»¥æ”¾åˆ°å¼‚æ­¥ç»„ä»¶ä¸­ï¼Œé€šè¿‡æ‡’åŠ è½½çš„æ–¹å¼åŠ è½½ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ä½ çš„é¡µé¢æ€§èƒ½å¾—åˆ°éå¸¸å¤§çš„æå‡ï¼Œé¡µé¢è®¿é—®é€Ÿåº¦å˜å¾—éå¸¸çš„å¿«ï¼Œä½†ğŸˆ¶ï¸è§‰å¾—æ‡’åŠ è½½å¯èƒ½ä¼šç‰ºç‰²ä¸€äº›ç”¨æˆ·ä½“éªŒï¼Œè¿™æ—¶å°±å¯ä»¥åˆ©ç”¨Prefetchæ¥åšï¼Œä½†Prefetchåœ¨æŸäº›æµè§ˆå™¨ä¸Šå¯èƒ½ä¼šä¸€äº›å…¼å®¹æ€§é—®é¢˜ï¼Œä½¿ç”¨æ—¶è¦æ³¨æ„\n   - é‡ç‚¹ï¼šåœ¨åšå‰ç«¯æ€§èƒ½ä¼˜åŒ–æ—¶ï¼Œç¼“å­˜å…¶å®å¹¶ä¸æ˜¯æœ€é‡è¦çš„ç‚¹ï¼Œæœ€é‡è¦çš„ç‚¹æ˜¯ä»£ç åˆ©ç”¨ç‡\n   ## CSSæ–‡ä»¶çš„ä»£ç åˆ†éš”\n   -  output -> chunkFilename: '[name].bundle.js', å†³å®š non-entry chunk(éä¸»å…¥å£ chunk) çš„åç§°\n   -  webpackåšæ‰“åŒ…æ—¶ï¼Œé»˜è®¤ä¼šå°†CSSæ–‡ä»¶æ‰“åŒ…è¿›JSä¸­ï¼Œå³css in js\n   -  mini-css-extract-plugin æ’ä»¶ä¼šå°†cssæ–‡ä»¶å•ç‹¬æ‰“åŒ…ç”Ÿæˆä¸€ä¸ªcssæ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ‰“åŒ…è¿›jsä¸­\n   -  åœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨æ—¶ï¼Œä¸æ”¯æŒæ¨¡å—çƒ­æ›´æ–°ï¼Œå¯¼è‡´å¼€å‘æ•ˆç‡ä¸é«˜ï¼Œæ‰€ä»¥åªåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å®ƒ\n   -  åœ¨é¡¹ç›®ä¸­ä½¿ç”¨cssæ—¶ï¼Œä½¿ç”¨import './style.css',è¦è°¨é˜²cssæ–‡ä»¶è¢«tree shakingåˆ é™¤,éœ€è¦åœ¨package.jsonä¸­é…ç½®sideEffects: [\"*.css\"]\n   - ä½¿ç”¨ï¼š\n")])])]),s("p",[n._v('npm install --save-dev mini-css-extract-plugin\nconst MiniCssExtractPlugin = require("mini-css-extract-plugin");\nmodule.exports = {\nplugins: [\nnew MiniCssExtractPlugin({\n// Options similar to the same options in webpackOptions.output\n// both options are optional\nfilename: "[name].css", //ç›´æ¥è¢«å¼•å…¥åˆ°htmlæ–‡ä»¶ä¸­ä¼šèµ°filename\nchunkFilename: "[id].css" //é—´æ¥è¢«å¼•å…¥htmlæ–‡ä»¶ä¼šèµ°chunkFilename\n})\n],\nmodule: {\nrules: [\n{\ntest: /.css$/,\nuse: [\n{\nloader: MiniCssExtractPlugin.loader,\noptions: {\n// you can specify a publicPath here\n// by default it use publicPath in webpackOptions.output\npublicPath: \'../\'\n}\n},\n"css-loader"\n]\n}\n]\n}\n}')]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("- optimize-css-assets-webpack-plugin æ‰“åŒ…åˆ†ç¦»å‡ºçš„cssæ–‡ä»¶ï¼Œé»˜è®¤æœªå‹ç¼©ï¼Œè¦æƒ³å‹ç¼©åˆå¹¶ï¼Œä½¿ç”¨è¯¥æ’ä»¶\n")])])]),s("p",[n._v('npm i optimize-css-assets-webpack-plugin -S\nconst OptimizeCSSAssetsPlugin = require("optimize-css-assets-webpack-plugin")\noptimization: {\nminimizer: [\nnew OptimizeCSSAssetsPlugin({})\n]\n},\n// å°±ä¸å¿…åœ¨pluginsæ•°ç»„ä¸­å®ä¾‹åŒ–è¯¥æ’ä»¶äº†')]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("- å¦‚æœå¯¹äºå¤šä¸ªå…¥å£æ–‡ä»¶çš„æ‰“åŒ…ï¼Œå¸Œæœ›æŠŠæ‰€æœ‰å…¥å£æ–‡ä»¶ä¸­å¼•å…¥çš„cssæ–‡ä»¶ï¼Œéƒ½æ‰“åŒ…åˆ°distæ–‡ä»¶å¤¹ä¸‹çš„åŒä¸€ä¸ªcssæ–‡ä»¶ä¸­ï¼Œéœ€è¦å†é…ç½®optimizationä¸‹çš„splitChunksï¼Œoptimize-css-assets-webpack-pluginæ’ä»¶çš„åº•å±‚ä¹Ÿæ˜¯ä¾èµ–splitChunks,éœ€è¦åœ¨æ·»åŠ ä¸€ä¸ªstylesç»„ï¼Œå¯¹æ‰“åŒ…ç”Ÿæˆçš„cssæ–‡ä»¶åšå¤„ç†\n")])])]),s("p",[n._v("optimization: {\nsplitChunks: {\ncacheGroups: {\nstyles: {\nname: 'styles',\ntest: /.css$/,\nchunks: 'all',\nenforce: true\n}\n}\n}\n},")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("- å¦‚æœå¯¹äºå¤šä¸ªå…¥å£æ–‡ä»¶çš„æ‰“åŒ…ï¼Œå¸Œæœ›æŠŠæ¯ä¸ªå…¥å£æ–‡ä»¶ä¸­å¼•å…¥çš„cssæ–‡ä»¶éƒ½å•ç‹¬æ‰“åŒ…åˆ°distæ–‡ä»¶å¤¹ä¸‹çš„ä¸åŒçš„cssæ–‡ä»¶ä¸­,è¿˜æ˜¯é…ç½®splitChunks,éœ€è¦åœ¨æ·»åŠ å„è‡ªå¯¹åº”çš„ç»„\n")])])]),s("p",[n._v("optimization: {\nsplitChunks: {\ncacheGroups: {\nfooStyles: {\nname: 'foo',\ntest: (m,c,entry = 'foo') => m.constructor.name === 'CssModule' && recursiveIssuer(m) === entry,\nchunks: 'all',\nenforce: true\n},\nbarStyles: {\nname: 'bar',\ntest: (m,c,entry = 'bar') => m.constructor.name === 'CssModule' && recursiveIssuer(m) === entry,\nchunks: 'all',\nenforce: true\n}\n}\n}\n},")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("## webpackä¸æµè§ˆå™¨ç¼“å­˜(Caching)\n- performance: false, å–æ¶ˆå¯¹æ€§èƒ½æç¤ºçš„è­¦å‘Š\n- ä½¿ç”¨contentHashå ä½ç¬¦ï¼Œè§£å†³æµè§ˆå™¨ç¼“å­˜å¯¼è‡´æ— æ³•æ›´æ–°æœåŠ¡å™¨é™æ€èµ„æºçš„é—®é¢˜\n- å½“æˆ‘ä»¬é‡æ–°æ‰“åŒ…ä¸Šçº¿æ—¶ï¼Œç”¨æˆ·åªéœ€è¦æ›´æ–°æœ‰å˜åŒ–çš„ä»£ç ï¼Œæ²¡æœ‰å˜åŒ–çš„ä»£ç ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ç”¨ä»–ä»¬æœ¬åœ°æµè§ˆå™¨çš„ç¼“å­˜\n- contenthashæ˜¯æ ¹æ®contentäº§ç”Ÿçš„ä¸€ä¸ªhashå­—ç¬¦ä¸²ï¼Œå†…å®¹ä¸å˜ï¼Œhashå­—ç¬¦ä¸²ä¹Ÿä¸å˜ï¼Œå†…å®¹å˜äº†ï¼Œhashå­—ç¬¦ä¸²æ‰å˜\n- åœ¨å¼€å‘ç¯å¢ƒï¼Œå®æ—¶é‡è½½å’Œçƒ­æ¨¡å—æ›´æ–°ä¼šå¸®åŠ©æˆ‘ä»¬è§£å†³ç¼“å­˜çš„é—®é¢˜ï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬å°±è¦å€ŸåŠ©contenthashå ä½ç¬¦ï¼Œå¸®åŠ©æˆ‘ä»¬è§£å†³æµè§ˆå™¨ç¼“å­˜çš„é—®é¢˜\n")])])]),s("p",[n._v("// åªéœ€åœ¨ç”Ÿäº§ç¯å¢ƒåªé…ç½®\noutput:{\nfilename: '[name].[contenthash].js',\nchunkFilename: '[name].[contenthash].js'\n},")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("- å¯¹äºè€ç‰ˆæœ¬webpackï¼Œåœ¨ä½¿ç”¨äº†contenthashåï¼Œå³ä¾¿æ²¡æœ‰å¯¹ä»£ç åšä¿®æ”¹ï¼Œæ‰“åŒ…åç”Ÿæˆçš„contenthashä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦å†åŠ ä¸€äº›é¢å¤–çš„é…ç½®ï¼Œ\n- åœ¨webpack.common.jsä¸­çš„optimizationä¸­æ·»åŠ runtimeChunk,æ–°ç‰ˆæœ¬ä¸­ä¹Ÿæ˜¯å¯ä»¥é…ç½®è¯¥å‚æ•°çš„ï¼Œè¿™æ ·ï¼Œåœ¨æœ€ç»ˆæ‰“åŒ…ç”Ÿæˆçš„ä»£ç ä¸­å°†ä¼šå¤šä¸€ä¸ªruntime.contenthash.jsçš„æ–‡ä»¶ï¼Œ \n- åœ¨åšwebpackæ‰“åŒ…æ—¶ï¼Œmain.jsæ”¾çš„æ˜¯ä¸šåŠ¡é€»è¾‘ï¼Œvendors.jsæ”¾çš„æ˜¯ç¬¬ä¸‰æ–¹åº“æ–‡ä»¶ï¼Œè€Œä¸šåŠ¡é€»è¾‘ä¸ç¬¬ä¸‰æ–¹åº“æ–‡ä»¶ä¹‹é—´æ˜¯ä¸€äº›å…³è”ï¼Œè¿™äº›å…³è”ä»£ç è¢«ç§°ä¸ºmanifestï¼Œå®ƒé»˜è®¤å­˜åœ¨äºmain.jsï¼Œä¹Ÿå­˜åœ¨äºvendors.jsï¼Œå½“å†æ¬¡æ‰“åŒ…æ—¶ï¼Œè¿™äº›å…³è”ä»£ç å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥contenthashä¹Ÿå˜äº†ï¼Œè€Œruntime.contenthash.jsæ–‡ä»¶å°±æ˜¯æŠŠmanifestæ–‡ä»¶å•ç‹¬æŠ½å–å‡ºæ¥äº†ï¼Œæ‰€ä»¥ä¹‹åå¦‚æœä¸šåŠ¡é€»è¾‘å’Œåº“æ–‡ä»¶ä»£ç å¦‚æœæ²¡æœ‰ä¿®æ”¹ï¼Œåˆ™å¯¹åº”çš„contenthashä¹Ÿå°±ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå‘ç”Ÿå˜åŒ–çš„åªæœ‰runtime.contenthash.jsä¸­çš„contenthashï¼Œæ­¤å¤–è€ç‰ˆæœ¬webpackåšç¼“å­˜è¿˜è¦å€ŸåŠ©ä¸€äº›å…¶ä»–æ’ä»¶ï¼Œå»ºè®®ç›´æ¥å‡çº§æ–°ç‰ˆæœ¬\n")])])]),s("p",[n._v("optimization: {\nruntimeChunk: {\nname: 'runtime '\n}\n}")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("## Shimmingçš„ä½œç”¨\n- åœ¨webpackæ‰“åŒ…è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€è¦åšä¸€äº›ä»£ç ä¸Šçš„å…¼å®¹æˆ–è€…æ‰“åŒ…è¿‡ç¨‹çš„å…¼å®¹ \n- ä¾‹å¦‚@babel/polyfillå®ƒè§£å†³çš„æ˜¯ ï¼Œæˆ‘ä»¬æ‰“åŒ…ç”Ÿæˆçš„JSä»£ç è¿è¡Œåœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨æ—¶ï¼Œæœ‰æ—¶ä¼šå› ä¸ºä½ç‰ˆæœ¬æµè§ˆå™¨ä¸Šä¸å­˜åœ¨Promiseå˜é‡å¯¼è‡´æˆ‘ä»¬çš„ä»£ç æ— æ³•è¿è¡Œï¼Œ å€ŸåŠ©å®ƒï¼Œåœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸Šè‡ªåŠ¨çš„å¸®æˆ‘ä»¬å»æ„å»ºä¸€äº›ç±»ä¼¼Promiseè¿™æ ·çš„å…¨å±€å˜é‡ï¼Œä»è€Œä½¿æˆ‘ä»¬çš„ä»£ç å¯ä»¥åœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸Šè¿è¡Œï¼Œå…¶å®è¿™å°±æ˜¯ä¸€ä¸ªwebpackçš„å«ç‰‡ï¼Œå®ƒèƒ½å¤Ÿè§£å†³webpackæ‰“åŒ…è¿‡ç¨‹ä¸­çš„ä¸€äº›å…¼å®¹æ€§é—®é¢˜ï¼Œå½“ç„¶è¿™ç§å…¼å®¹æ€§é—®é¢˜ä¸å±€é™åœ¨æµè§ˆå™¨çš„é«˜ä½ç‰ˆæœ¬é—´ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–æ–¹é¢\n- è¿™äº›å¯ä»¥ä¿®æ”¹webpacké»˜è®¤è¡Œä¸ºçš„å…¼å®¹éƒ½å¯ä»¥ç§°ä¹‹ä¸ºå«ç‰‡\n-  å¯ä»¥è‡ªåŠ¨å‘æ–°çš„npmæ¨¡å—ä¸­å¼•å…¥jqueryï¼Œè§£å†³æœ‰æ—¶å€™æˆ‘ä»¬æ— æ³•æ‰‹åŠ¨æ·»åŠ ä¸€äº›è€ç‰ˆæœ¬åº“æ–‡ä»¶çš„é—®é¢˜\n")])])]),s("p",[n._v("new  webpack.ProvidePlugin({\n$: 'jquery',\n_: 'lodash ',\n_join: ['lodash ', 'join']\n})")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("-  ä¸€ä¸ªjsæ¨¡å—ä¸­çš„this, é»˜è®¤æ°¸è¿œæŒ‡å‘æ¨¡å—è‡ªèº«ï¼Œè€Œä¸æ˜¯windowï¼Œå¦‚æœå¸Œæœ›å°†æ¯ä¸ªæ¨¡å—ä¸­çš„thiséƒ½æŒ‡å‘window,å¯ä»¥å€ŸåŠ©imports-loader æ¥å¯¹thisæŒ‡å‘åšå˜æ›´\n")])])]),s("p",[n._v("npm i imports-loader -S\nrules: [\n{\ntest: '/.js$/',\nexclude: /(node_modules|bower_components)/,\nuse: [\n{ loader: 'babel-loader'},\n{\nloader: 'imports-loader?this=>window'\n}\n]\n}}")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("## ç¯å¢ƒå˜é‡çš„ä½¿ç”¨\n- env")])])])])}),[],!1,null,null,null);e.default=t.exports}}]);